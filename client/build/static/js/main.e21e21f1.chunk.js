(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,a,t){},110:function(e,a){},111:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(39),s=t.n(c),i=(t(101),t(25)),o=t(7),l=t(120),j=t(93),d=t(14),b=t(11),u=t(80),O=t(19),m=function(e,a){switch(a.type){case"UPDATE_DRINKS":return Object(d.a)(Object(d.a)({},e),{},{drinks:Object(O.a)(a.drinks)});case"ADD_TO_CART":return Object(d.a)(Object(d.a)({},e),{},{cartOpen:!0,cart:[].concat(Object(O.a)(e.cart),[a.item])});case"ADD_MULTIPLE_TO_CART":return Object(d.a)(Object(d.a)({},e),{},{cart:[].concat(Object(O.a)(e.cart),Object(O.a)(a.drinks))});case"REMOVE_FROM_CART":var t=e.cart.filter((function(e){return e._id!==a._id}));return Object(d.a)(Object(d.a)({},e),{},{cartOpen:t.length>0,cart:t});case"CLEAR_CART":return Object(d.a)(Object(d.a)({},e),{},{cartOpen:!1,cart:[]});case"UPDATE_CATEGORIES":return Object(d.a)(Object(d.a)({},e),{},{categories:Object(O.a)(a.categories)});case"UPDATE_CURRENT_CATEGORY":return Object(d.a)(Object(d.a)({},e),{},{currentCategory:a.currentCategory});default:return e}};var h=t(1),x=["value"],p=Object(n.createContext)(),g=p.Provider,f=function(e){e.value;var a,t=Object(u.a)(e,x),r=(a={drinks:[],cart:[],cartOpen:!1,categories:[],currentCategory:""},Object(n.useReducer)(m,a)),c=Object(b.a)(r,2),s=c[0],i=c[1];return Object(h.jsx)(g,Object(d.a)({value:[s,i]},t))},v=(t(51),t(115)),k=t(116),w=t(117),y=t(82),C=t(118),N=t(119);var L,T,_,S=function(e){return Object(h.jsx)(v.a,{style:{backgroundColor:"transparent"},fluid:!0,children:Object(h.jsx)(k.a,{children:Object(h.jsx)(w.a,{children:Object(h.jsxs)(y.a,{className:"text-center",children:[Object(h.jsx)(C.a,{src:"../public/images/cover.jpg",alt:"coffee banner",fluid:!0}),Object(h.jsx)("h1",{className:"mt-4",children:"Sleepy?"}),Object(h.jsxs)("h2",{children:["Why not take a coffee break?",Object(h.jsx)("br",{}),"Order from our delicious menu"]}),Object(h.jsx)(N.a,{className:"mt-4",variant:"secondary",href:"/menu",size:"lg",children:"Order Now"})]})})})})},R=t(12),E=t(10),I=t(16),D=t(123),$=t(30),A=t(31),P=t(71),B=t.n(P),q=new(function(){function e(){Object($.a)(this,e)}return Object(A.a)(e,[{key:"getProfile",value:function(){return B()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return B()(e).exp<Date.now()/1e3}catch(a){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),G=t(66),U=t(42),M=Object(U.a)(L||(L=Object(G.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),z=Object(U.a)(T||(T=Object(G.a)(["\n  mutation addUser(\n    $firstName: String!\n    $lastName: String!\n    $email: String!\n    $password: String!\n  ) {\n    addUser(\n      firstName: $firstName\n      lastName: $lastName\n      email: $email\n      password: $password\n    ) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),F=(Object(U.a)(_||(_=Object(G.a)(["\n  mutation addOrder($drinks: [ID]!) {\n    addOrder(drinks: $drinks) {\n      purchaseDate\n      drinks {\n        _id\n        name\n        description\n        price\n        category {\n          name\n        }\n        customize {\n          size\n          milk\n          flavor\n        }\n      }\n    }\n  }\n"]))),t(125)),H=t(121);var J=function(e){var a=Object(n.useState)({email:"",password:""}),t=Object(b.a)(a,2),r=t[0],c=t[1],s=Object(D.a)(z),i=Object(b.a)(s,1)[0],o=function(){var e=Object(I.a)(Object(E.a)().mark((function e(a){var t,n;return Object(E.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log({email:r.email,password:r.password,firstName:r.firstName,lastName:r.lastName}),e.next=4,i({variables:{email:r.email,password:r.password,firstName:r.firstName,lastName:r.lastName}});case 4:t=e.sent,n=t.data.addUser.token,q.login(n);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),l=function(e){var a=e.target,t=a.name,n=a.value;console.log(e.target.type),c(Object(d.a)(Object(d.a)({},r),{},Object(R.a)({},t,n)))};return Object(h.jsx)(v.a,{style:{backgroundColor:"transparent",minHeight:"100vh"},fluid:!0,children:Object(h.jsx)(k.a,{children:Object(h.jsx)(w.a,{className:"justify-content-md-center",children:Object(h.jsx)(y.a,{md:!0,lg:"4",children:Object(h.jsx)(F.a,{children:Object(h.jsx)(F.a.Body,{children:Object(h.jsxs)(H.a,{onSubmit:o,action:"submit",children:[Object(h.jsxs)(H.a.Group,{controlId:"formFirst",children:[Object(h.jsx)(H.a.Label,{children:"First Name"}),Object(h.jsx)(H.a.Control,{type:"firstname",name:"firstName",isRequired:!0,onChange:l})]}),Object(h.jsxs)(H.a.Group,{controlId:"formLast",children:[Object(h.jsx)(H.a.Label,{children:"Last Name"}),Object(h.jsx)(H.a.Control,{type:"lastname",name:"lastName",isRequired:!0,onChange:l})]}),Object(h.jsxs)(H.a.Group,{controlId:"formEmail",children:[Object(h.jsx)(H.a.Label,{children:"Email address"}),Object(h.jsx)(H.a.Control,{type:"email",name:"email",isRequired:!0,onChange:l})]}),Object(h.jsxs)(H.a.Group,{controlId:"formBasicPassword",children:[Object(h.jsx)(H.a.Label,{children:"Password"}),Object(h.jsx)(H.a.Control,{type:"password",name:"password",isRequired:!0,onChange:l})]}),Object(h.jsx)(N.a,{variant:"dark",type:"submit",block:!0,children:"Signup"})]})})})})})})})};var K=function(e){var a=Object(n.useState)({email:"",password:""}),t=Object(b.a)(a,2),r=t[0],c=t[1],s=Object(D.a)(M),i=Object(b.a)(s,2),o=i[0],l=i[1].error,j=function(){var e=Object(I.a)(Object(E.a)().mark((function e(a){var t,n;return Object(E.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,console.log(r.email),console.log(r.password),e.next=6,o({variables:{email:r.email,password:r.password}});case 6:t=e.sent,n=t.data.login.token,q.login(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(a){return e.apply(this,arguments)}}(),u=function(e){var a=e.target,t=a.name,n=a.value;c(Object(d.a)(Object(d.a)({},r),{},Object(R.a)({},t,n)))};return Object(h.jsx)(v.a,{style:{backgroundColor:"transparent",minHeight:"100vh"},fluid:!0,children:Object(h.jsx)(k.a,{children:Object(h.jsx)(w.a,{className:"justify-content-md-center",children:Object(h.jsx)(y.a,{md:!0,lg:"4",children:Object(h.jsx)(F.a,{children:Object(h.jsx)(F.a.Body,{children:Object(h.jsxs)(H.a,{onSubmit:j,action:"submit",children:[Object(h.jsxs)(H.a.Group,{controlId:"formEmail",children:[Object(h.jsx)(H.a.Label,{children:"Email address"}),Object(h.jsx)(H.a.Control,{type:"email",name:"email",isRequired:!0,onChange:u})]}),Object(h.jsxs)(H.a.Group,{controlId:"formBasicPassword",children:[Object(h.jsx)(H.a.Label,{children:"Password"}),Object(h.jsx)(H.a.Control,{type:"password",name:"password",isRequired:!0,onChange:u})]}),l?Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:"error-text",children:"The provided credentials are incorrect"})}):null,Object(h.jsx)(N.a,{variant:"dark",type:"submit",block:!0,children:"Login"})]})})})})})})})},V=t(122),W=t(124);var Y=function(e){return q.loggedIn()?Object(h.jsxs)(V.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(h.jsx)(V.a.Brand,{as:i.b,to:"/",children:"<Deja Brew> \u2615"}),Object(h.jsx)(V.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(h.jsx)(V.a.Collapse,{id:"basic-navbar-nav",children:Object(h.jsxs)(W.a,{className:"mr-auto",children:[Object(h.jsx)(W.a.Link,{as:i.b,to:"/menu",children:"Menu"}),Object(h.jsx)(W.a.Link,{as:i.b,to:"/cart",children:"Cart"}),Object(h.jsx)(W.a.Link,{as:i.b,to:"/profile",children:"Profile"}),Object(h.jsx)(W.a.Link,{as:i.b,to:"/",onClick:function(){return q.logout()},children:"Logout"})]})})]}):Object(h.jsxs)(V.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(h.jsx)(V.a.Brand,{as:i.b,to:"/",children:"<Deja Brew> \u2615"}),Object(h.jsx)(V.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(h.jsx)(V.a.Collapse,{id:"basic-navbar-nav",children:Object(h.jsxs)(W.a,{className:"mr-auto",children:[Object(h.jsx)(W.a.Link,{as:i.b,to:"/menu",children:"Menu"}),Object(h.jsx)(W.a.Link,{as:i.b,to:"/cart",children:"Cart"}),Object(h.jsx)(W.a.Link,{as:i.b,to:"/signup",children:"Signup"}),Object(h.jsx)(W.a.Link,{as:i.b,to:"/login",children:"Login"})]})})]})},Q=new j.a({request:function(e){var a=localStorage.getItem("id_token");e.setContext({headers:{authorization:a?"Bearer ".concat(a):""}})},uri:"http://localhost:3001/graphql"});var X=function(){return Object(h.jsx)(l.a,{client:Q,children:Object(h.jsx)(i.a,{children:Object(h.jsxs)(f,{children:[Object(h.jsx)(Y,{}),Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{path:"/",element:Object(h.jsx)(S,{})}),Object(h.jsx)(o.a,{path:"/login",element:Object(h.jsx)(K,{})}),Object(h.jsx)(o.a,{path:"/signup",element:Object(h.jsx)(J,{})})]})]})})})};t(110);s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(X,{})}),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.e21e21f1.chunk.js.map