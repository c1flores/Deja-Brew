{"ast":null,"code":"import _objectSpread from\"C:/Users/Christian Flores/Desktop/UCB-VIRT-FSF-PT-07-2022-U-LOLC/22-State/02-Challenge/Main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{Link}from'react-router-dom';import{pluralize}from'../../utils/helpers';import{useDispatch,useSelector}from'react-redux';import{ADD_TO_CART,UPDATE_CART_QUANTITY}from'../../utils/actions';import{idbPromise}from'../../utils/helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductItem(item){var dispatch=useDispatch();var state=useSelector(function(state){return state;});var image=item.image,name=item.name,_id=item._id,price=item.price,quantity=item.quantity;var cart=state.cart;var addToCart=function addToCart(){var itemInCart=cart.find(function(cartItem){return cartItem._id===_id;});if(itemInCart){dispatch({type:UPDATE_CART_QUANTITY,_id:_id,purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1});idbPromise('cart','put',_objectSpread(_objectSpread({},itemInCart),{},{purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1}));}else{dispatch({type:ADD_TO_CART,product:_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1})});idbPromise('cart','put',_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1}));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card px-1 py-1\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/products/\".concat(_id),children:[/*#__PURE__*/_jsx(\"img\",{alt:name,src:\"/images/\".concat(image)}),/*#__PURE__*/_jsx(\"p\",{children:name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[quantity,\" \",pluralize('item',quantity),\" in stock\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",price]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addToCart,children:\"Add to cart\"})]});}export default ProductItem;","map":{"version":3,"names":["React","Link","pluralize","useDispatch","useSelector","ADD_TO_CART","UPDATE_CART_QUANTITY","idbPromise","ProductItem","item","dispatch","state","image","name","_id","price","quantity","cart","addToCart","itemInCart","find","cartItem","type","purchaseQuantity","parseInt","product"],"sources":["C:/Users/Christian Flores/Desktop/UCB-VIRT-FSF-PT-07-2022-U-LOLC/22-State/02-Challenge/Main/client/src/components/ProductItem/index.js"],"sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { pluralize } from '../../utils/helpers';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { ADD_TO_CART, UPDATE_CART_QUANTITY } from '../../utils/actions';\r\nimport { idbPromise } from '../../utils/helpers';\r\n\r\nfunction ProductItem(item) {\r\n  const dispatch = useDispatch();\r\n  const state = useSelector((state) => state);\r\n\r\n  const { image, name, _id, price, quantity } = item;\r\n\r\n  const { cart } = state;\r\n\r\n  const addToCart = () => {\r\n    const itemInCart = cart.find((cartItem) => cartItem._id === _id);\r\n    if (itemInCart) {\r\n      dispatch({\r\n        type: UPDATE_CART_QUANTITY,\r\n        _id: _id,\r\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1,\r\n      });\r\n      idbPromise('cart', 'put', {\r\n        ...itemInCart,\r\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1,\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: ADD_TO_CART,\r\n        product: { ...item, purchaseQuantity: 1 },\r\n      });\r\n      idbPromise('cart', 'put', { ...item, purchaseQuantity: 1 });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card px-1 py-1\">\r\n      <Link to={`/products/${_id}`}>\r\n        <img alt={name} src={`/images/${image}`} />\r\n        <p>{name}</p>\r\n      </Link>\r\n      <div>\r\n        <div>\r\n          {quantity} {pluralize('item', quantity)} in stock\r\n        </div>\r\n        <span>${price}</span>\r\n      </div>\r\n      <button onClick={addToCart}>Add to cart</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductItem;\r\n"],"mappings":"uLAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,SAAS,KAAQ,qBAAqB,CAC/C,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,WAAW,CAAEC,oBAAoB,KAAQ,qBAAqB,CACvE,OAASC,UAAU,KAAQ,qBAAqB,CAAC,wFAEjD,QAASC,YAAW,CAACC,IAAI,CAAE,CACzB,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAC9B,GAAMQ,MAAK,CAAGP,WAAW,CAAC,SAACO,KAAK,QAAKA,MAAK,GAAC,CAE3C,GAAQC,MAAK,CAAiCH,IAAI,CAA1CG,KAAK,CAAEC,IAAI,CAA2BJ,IAAI,CAAnCI,IAAI,CAAEC,GAAG,CAAsBL,IAAI,CAA7BK,GAAG,CAAEC,KAAK,CAAeN,IAAI,CAAxBM,KAAK,CAAEC,QAAQ,CAAKP,IAAI,CAAjBO,QAAQ,CAEzC,GAAQC,KAAI,CAAKN,KAAK,CAAdM,IAAI,CAEZ,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CACtB,GAAMC,WAAU,CAAGF,IAAI,CAACG,IAAI,CAAC,SAACC,QAAQ,QAAKA,SAAQ,CAACP,GAAG,GAAKA,GAAG,GAAC,CAChE,GAAIK,UAAU,CAAE,CACdT,QAAQ,CAAC,CACPY,IAAI,CAAEhB,oBAAoB,CAC1BQ,GAAG,CAAEA,GAAG,CACRS,gBAAgB,CAAEC,QAAQ,CAACL,UAAU,CAACI,gBAAgB,CAAC,CAAG,CAC5D,CAAC,CAAC,CACFhB,UAAU,CAAC,MAAM,CAAE,KAAK,gCACnBY,UAAU,MACbI,gBAAgB,CAAEC,QAAQ,CAACL,UAAU,CAACI,gBAAgB,CAAC,CAAG,CAAC,GAC3D,CACJ,CAAC,IAAM,CACLb,QAAQ,CAAC,CACPY,IAAI,CAAEjB,WAAW,CACjBoB,OAAO,gCAAOhB,IAAI,MAAEc,gBAAgB,CAAE,CAAC,EACzC,CAAC,CAAC,CACFhB,UAAU,CAAC,MAAM,CAAE,KAAK,gCAAOE,IAAI,MAAEc,gBAAgB,CAAE,CAAC,GAAG,CAC7D,CACF,CAAC,CAED,mBACE,aAAK,SAAS,CAAC,gBAAgB,wBAC7B,MAAC,IAAI,EAAC,EAAE,qBAAeT,GAAG,CAAG,wBAC3B,YAAK,GAAG,CAAED,IAAK,CAAC,GAAG,mBAAaD,KAAK,CAAG,EAAG,cAC3C,mBAAIC,IAAI,EAAK,GACR,cACP,oCACE,uBACGG,QAAQ,CAAC,GAAC,CAACd,SAAS,CAAC,MAAM,CAAEc,QAAQ,CAAC,CAAC,WAC1C,GAAM,cACN,wBAAM,GAAC,CAACD,KAAK,GAAQ,GACjB,cACN,eAAQ,OAAO,CAAEG,SAAU,UAAC,aAAW,EAAS,GAC5C,CAEV,CAEA,cAAeV,YAAW"},"metadata":{},"sourceType":"module"}